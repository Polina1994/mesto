(()=>{"use strict";var e="",t=[{name:"Архыз",link:e+"4f758c0b3249a5c10a6f.jpg"},{name:"Челябинская область",link:e+"b413f70961958578a3bc.jpg"},{name:"Иваново",link:e+"321b4e473123a7ccc059.jpg"},{name:"Камчатка",link:e+"800246cf29049dd42611.jpg"},{name:"Холмогорский район",link:e+"cf0204b50a4d7258550f.jpg"},{name:"Байкал",link:e+"1bd7c2afc84e6e5fb645.jpg"}],n={inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"button_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"};function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._link=t.link,this._name=t.name,this._cardSelector=n,this._card=this._getTemplate(),this._cardName=this._card.querySelector(".element__title"),this._cardLink=this._card.querySelector(".element__image"),this._likeBtn=this._card.querySelector(".element__like"),this._trashBtn=this._card.querySelector(".element__trash"),this._openImage=i}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"_cardLike",value:function(){this._likeBtn.classList.toggle("element__like-active")}},{key:"_cardDelete",value:function(){this._trashBtn.closest(".element").remove()}},{key:"_setEventListeners",value:function(){var e=this;this._trashBtn.addEventListener("click",(function(){e._cardDelete()})),this._cardLink.addEventListener("click",(function(){e._openImage(e._name,e._link)})),this._likeBtn.addEventListener("click",(function(){e._cardLike()}))}},{key:"generateCard",value:function(){return this._cardName.textContent=this._name,this._cardLink.src=this._link,this._cardLink.alt=this._name,this._setEventListeners(),this._card}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._validate=t,this._form=n,this._inputList=Array.from(this._form.querySelectorAll(this._validate.inputSelector)),this._buttonElement=this._form.querySelector(this._validate.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e){var t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.add(this._validate.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._validate.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._validate.inputErrorClass),t.classList.remove(this._validate.errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.disabled="disabled",this._buttonElement.classList.add(this._validate.inactiveButtonClass)):(this._buttonElement.disabled="",this._buttonElement.classList.remove(this._validate.inactiveButtonClass))}},{key:"_setEventListeners",value:function(){var e=this;this.toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e.toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),u=document.querySelector(".popup-edit"),c=document.querySelector(".popup-add"),l=document.querySelector(".form-add"),s=document.querySelector(".form-edit"),d=document.querySelector(".popup-image"),_=document.querySelector(".profile__add-button"),p=document.querySelector(".profile__edit-button"),m=document.querySelector(".profile__name"),v=document.querySelector(".profile__job"),f=document.querySelector(".popup__input_value_name"),h=document.querySelector(".popup__input_value_job"),y=document.querySelector(".popup__input_value_place"),k=document.querySelector(".popup__input_value_link"),b=document.querySelector(".elements"),S=document.querySelector(".popup-image__image"),g=document.querySelector(".popup-image__title"),E=new a(n,s),L=new a(n,l);function q(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",w)}function C(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",w)}function w(e){"Escape"===e.key&&C(document.querySelector(".popup_is-opened"))}function B(e){e.target===e.currentTarget&&C(e.target)}function j(e){e.preventDefault(),m.textContent=f.value,v.textContent=h.value,C(u),E.toggleButtonState()}function I(e,t){q(d),S.src=t,S.alt=e,g.textContent=e}function x(e){b.prepend(new r(e,".card",I).generateCard())}_.addEventListener("click",(function(){q(c)})),p.addEventListener("click",(function(){f.value=m.textContent,h.value=v.textContent,q(u)})),document.querySelectorAll(".popup__close-button").forEach((function(e){var t=e.closest(".popup");e.addEventListener("click",(function(){return C(t)}))})),document.querySelectorAll(".popup").forEach((function(e){e.addEventListener("mousedown",B)})),c.addEventListener("submit",j),u.addEventListener("submit",j),c.addEventListener("submit",(function(e){e.preventDefault();var t={};t.name=y.value,t.link=k.value,x(t),e.target.reset(),C(c),L.toggleButtonState()})),t.forEach(x),E.enableValidation(),L.enableValidation()})();